<!DOCTYPE html>
<html>
<head>
    <title>Plaid Link</title>
</head>
<body>
    <script src="https://cdn.plaid.com/link/v2/stable/link-initialize.js"></script>
    <div id="plaid-link-container"></div>
    <script>
        const linkToken = "{{ .LinkToken }}";
        const handler = Plaid.create({
            token: linkToken,
            onSuccess: function (publicToken) {
                const xhr = new XMLHttpRequest();
                xhr.open("POST", "/plaid-callback", true);
                xhr.setRequestHeader("Content-Type", "application/json");
                xhr.onreadystatechange = function () {
                    if (xhr.readyState === 4 && xhr.status === 200) {
                        console.log("Plaid Link Test callback received");
                    }
                };
                xhr.send(JSON.stringify({ public_token: publicToken }));
            }
        });
        handler.open();
    </script>
</body>
</html>
